<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- 31_animate.qdoc -->
  <title>mobile_html5 : Animations</title>
  <link rel="stylesheet" type="text/css" href="style/styles.css" />
</head>
<body>
<?php $title = 'Documentation'; include('../../header.inc'); ?>
<style>
.level1 { margin-left: 0em }
.level2 { margin-left: 2em }
.level3 { margin-left: 4em }
.level4 { margin-left: 6em }
.level5 { margin-left: 8em }
pre, blockquote { padding: 1.0em; border: thin solid #777; border-radius: 1.0em; margin: 1.0em; }
pre{white-space:pre;overflow-x:scroll;background-image:-webkit-linear-gradient(0deg,#ddd,#aaa);}
blockquote { background: #ddd; width: 500px; float: right;  }
blockquote > h3 { text-align: center; margin: 0 }
footer { font-size: x-small; text-align: center }
img[src*='support_'] { float: right; margin-left: 0.25em; height: 36px; width: 36px; border-radius: 0.5em }
</style>
<a href=index.html>[Index]</a>
<!-- START --><div class="toc">
<h3><a name="toc">Contents</a></h3>
<ul>
<li class="level1"><a href="#css-transitions">CSS Transitions</a></li>
<li class="level1"><a href="#transition-events">Transition Events</a></li>
<li class="level1"><a href="#css-keyframe-animations">CSS Keyframe Animations</a></li>
<li class="level1"><a href="#resources">Resources</a></li>
<li class="level1"><a href="#xxx-g">XXX G</a></li>
<li class="level2"><a href="#transitions">Transitions</a></li>
<li class="level2"><a href="#what-can-be-transitioned">What Can Be Transitioned?</a></li>
<li class="level2"><a href="#transitional-sequences">Transitional Sequences</a></li>
<li class="level2"><a href="#timing-functions">Timing Functions</a></li>
<li class="level2"><a href="#keyframe-animations">Keyframe Animations</a></li>
<li class="level2"><a href="#dynamic-keyframes">Dynamic Keyframes</a></li>
</ul>
</div>
<h1 class="title">Animations</h1>
<span class="subtitle"></span>
<!-- $$$animation.html-description -->
<div class="descr"> <a name="details"></a>
<p>Animations can help engage users with your application and provide rich visual context for its various functions.</p>
<p>Web interfaces are driven by CSS <i>style sheets</i>. Web applications can dynamically apply different sets of style sheets, and CSS <i>transitions</i> can make those interface shifts animate gradually. CSS <i>keyframe animations</i> offer more flexibility, and are not tied to shifts between style sheets.</p>
<a name="css-transitions"></a>
<h2>CSS Transitions</h2>
<p>This example expands a navigation panel from a small icon:</p>
<p><a href="../examples/animate.htm"> <img src="images/animate.png" alt="" /> <img src="images/animate2.png" alt="" /> </a></p>
<p><a href="../examples/animate.htm"> __IFRAME__ </a> <a href="../examples/animate.htm"> <img src="images/icon_html.png" alt="" /> </a> <a href="../examples/css/animate.css"> <img src="images/icon_css.png" alt="" /> </a> <a href="../examples/js/animate.js"> <img src="images/icon_js.png" alt="" /> </a></p>
<p>Tapping on the element toggles its <tt>expanded</tt> class, which alters its <tt>width</tt>, <tt>border</tt>, and <tt>background-position</tt> properties. The <tt>-webkit-transition</tt> property animates specified properties, <tt>all</tt> in this case, over the course of one second:</p>
<pre class="cpp"><span class="preprocessor">#navbar {</span>
    <span class="operator">-</span>webkit<span class="operator">-</span>transition: all <span class="number">1s</span>;
    border: solid <span class="preprocessor">#fff 2px;;</span>
    background<span class="operator">-</span>image: url(<span class="operator">.</span><span class="operator">.</span><span class="operator">/</span>img<span class="operator">/</span>i0<span class="operator">.</span>png);
    background<span class="operator">-</span>position: <span class="number">90</span><span class="operator">%</span> <span class="number">50</span><span class="operator">%</span>;
    width: <span class="number">36px</span>;
}

<span class="preprocessor">#navbar.expanded {</span>
    border: solid <span class="preprocessor">#aaa 2px;</span>
    width: <span class="number">280px</span>;
    background<span class="operator">-</span>position: <span class="number">200</span><span class="operator">%</span> <span class="number">50</span><span class="operator">%</span>;
}</pre>
<p>Icons within the navigation panel also animate. The <tt>opacity</tt> property fades them in, and the <tt>scale</tt> transform zooms them in:</p>
<pre class="cpp"><span class="preprocessor">#navbar &gt; a {</span>
    <span class="operator">-</span>webkit<span class="operator">-</span>transition: all <span class="number">1s</span>;
    opacity: <span class="number">0</span>;
    <span class="operator">-</span>webkit<span class="operator">-</span>transform: scale(<span class="number">0</span>);
}

<span class="preprocessor">#navbar.expanded &gt; a {</span>
    opacity: <span class="number">1</span>;
    <span class="operator">-</span>webkit<span class="operator">-</span>transform: scale(<span class="number">1</span>);
}</pre>
<p>Tapping on any of the icons causes another panel to slide in, first horizontally, then vertically. This sequence relies on a two-state transition that manipulates the element's <tt>height</tt> and <tt>translate()</tt> transform function independently:</p>
<pre class="cpp"><span class="preprocessor">#panel {</span>
    <span class="operator">-</span>webkit<span class="operator">-</span>transition: height <span class="number">0.5s</span> <span class="number">0.0s</span><span class="operator">,</span> <span class="operator">-</span>webkit<span class="operator">-</span>transform <span class="number">0.5s</span> <span class="number">0.5s</span>;
    <span class="operator">-</span>webkit<span class="operator">-</span>transform: translateX(<span class="operator">-</span><span class="number">120</span><span class="operator">%</span>);
    height: <span class="number">10</span><span class="operator">%</span>;
}

<span class="preprocessor">#panel:target {</span>
    <span class="operator">-</span>webkit<span class="operator">-</span>transition: <span class="operator">-</span>webkit<span class="operator">-</span>transform <span class="number">0.5s</span> <span class="number">0.0s</span><span class="operator">,</span> height <span class="number">0.5s</span> <span class="number">0.5s</span>;
    <span class="operator">-</span>webkit<span class="operator">-</span>transform: translateX(<span class="number">0</span><span class="operator">%</span>);
    height: <span class="number">100</span><span class="operator">%</span>;
}</pre>
<p>Both animations within the sequence last half a second, and the second is delayed by the same amount.</p>
<a name="transition-events"></a>
<h2>Transition Events</h2>
<p>Applying a <tt>webkitTransitionEnd</tt> event handler allows you to execute subsequent transitions conditionally, or to perform any other action after a transition finishes executing. This example resembles the previous sequence, but implements transitions separately with <tt>higher</tt> and <tt>wider</tt> CSS classes:</p>
<pre class="cpp">div {
    background: <span class="preprocessor">#000;</span>
    width: <span class="number">100px</span>;
    height: <span class="number">100px</span>;
    <span class="operator">-</span>webkit<span class="operator">-</span>transition: all <span class="number">0.5s</span>;
}
<span class="operator">.</span>wider { width: <span class="number">200px</span>; }
<span class="operator">.</span>higher { height: <span class="number">200px</span>; }</pre>
<p>After the initial transition executes, this example prompts users if they want to continue:</p>
<pre class="cpp">document<span class="operator">.</span>querySelector(<span class="char">'div'</span>)<span class="operator">.</span>addEventListener(<span class="char">'click'</span><span class="operator">,</span> function(e) {
    <span class="keyword">if</span> (e<span class="operator">.</span>target<span class="operator">.</span>classList<span class="operator">.</span>length <span class="operator">=</span><span class="operator">=</span> <span class="number">0</span>) {
        e<span class="operator">.</span>target<span class="operator">.</span>classList<span class="operator">.</span>add(<span class="char">'wider'</span>);
        e<span class="operator">.</span>target<span class="operator">.</span>dataset<span class="operator">.</span>direction <span class="operator">=</span> <span class="char">'expand'</span>;
    }
    <span class="keyword">else</span> <span class="keyword">if</span> (e<span class="operator">.</span>target<span class="operator">.</span>classList<span class="operator">.</span>length <span class="operator">=</span><span class="operator">=</span> <span class="number">2</span>) {
        e<span class="operator">.</span>target<span class="operator">.</span>classList<span class="operator">.</span>remove(<span class="char">'higher'</span>);
        e<span class="operator">.</span>target<span class="operator">.</span>dataset<span class="operator">.</span>direction <span class="operator">=</span> <span class="char">'collapse'</span>;
    }
    <span class="keyword">else</span> {
         confirm(<span class="char">'OK to expand?'</span>)
             <span class="operator">?</span> e<span class="operator">.</span>target<span class="operator">.</span>classList<span class="operator">.</span>add(<span class="char">'higher'</span>)
             : e<span class="operator">.</span>target<span class="operator">.</span>classList<span class="operator">.</span>remove(<span class="char">'wider'</span>);
    }
});

document<span class="operator">.</span>querySelector(<span class="char">'div'</span>)<span class="operator">.</span>addEventListener(
  <span class="char">'webkitTransitionEnd'</span><span class="operator">,</span> function(e) {
    <span class="keyword">if</span> (e<span class="operator">.</span>target<span class="operator">.</span>classList<span class="operator">.</span>length <span class="operator">=</span><span class="operator">=</span> <span class="number">1</span>) {
        e<span class="operator">.</span>target<span class="operator">.</span>dataset<span class="operator">.</span>direction <span class="operator">=</span><span class="operator">=</span> <span class="char">'expand'</span>
            <span class="operator">&amp;</span><span class="operator">&amp;</span> confirm(<span class="char">'expand further?'</span>)
            <span class="operator">&amp;</span><span class="operator">&amp;</span> e<span class="operator">.</span>target<span class="operator">.</span>classList<span class="operator">.</span>add(<span class="char">'higher'</span>);
        e<span class="operator">.</span>target<span class="operator">.</span>dataset<span class="operator">.</span>direction <span class="operator">=</span><span class="operator">=</span> <span class="char">'collapse'</span>
            <span class="operator">&amp;</span><span class="operator">&amp;</span> confirm(<span class="char">'collapse further?'</span>)
            <span class="operator">&amp;</span><span class="operator">&amp;</span> e<span class="operator">.</span>target<span class="operator">.</span>classList<span class="operator">.</span>remove(<span class="char">'wider'</span>);
        e<span class="operator">.</span>target<span class="operator">.</span>dataset<span class="operator">.</span>direction <span class="operator">=</span> <span class="char">''</span>;

    }
    console<span class="operator">.</span>log( e<span class="operator">.</span>propertyName <span class="operator">+</span> <span class="string">&quot;, &quot;</span> <span class="operator">+</span> e<span class="operator">.</span>elapsedTime <span class="operator">+</span> <span class="char">'s'</span> );
});</pre>
<p>The event's <tt>propertyName</tt> corresponds to the value of each <tt>-webkit-transition-property</tt> that completes its transition. The <tt>elapsedTime</tt> correponds to each <tt>-webkit-transition-duration</tt>.</p>
<a name="css-keyframe-animations"></a>
<h2>CSS Keyframe Animations</h2>
<p>CSS <i>transitions</i> apply to shifts between distinct interface states. CSS <i>keyframe animations</i> allow for more complex effects, and can be applied more freely, for example to execute animations continuously. This example inserts a series of scrolling banner ads into the interface:</p>
<p><a href="../examples/keyframe.htm"> <img src="images/keyframe1.png" alt="" /> <img src="images/keyframe2.png" alt="" /> </a></p>
<p><a href="../examples/keyframe.htm"> __IFRAME__ </a> <a href="../examples/keyframe.htm"> <img src="images/icon_html.png" alt="" /> </a> <a href="../examples/css/keyframe.css"> <img src="images/icon_css.png" alt="" /> </a> <a href="../examples/js/keyframe.js"> <img src="images/icon_js.png" alt="" /> </a></p>
<p>After an initial 4-second delay, an animation titled <i>push_down</i> is applied to the main panel, which takes 1 second to execute:</p>
<pre class="cpp">article {
    <span class="operator">-</span>webkit<span class="operator">-</span>animation: push_down <span class="number">1s</span> <span class="number">4s</span>;
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>fill<span class="operator">-</span>mode: both;
}</pre>
<p>The animation is defined elsewhere within the CSS region, within a <tt>@-webkit-keyframes</tt> rule. Each keyframe manipulates CSS properties over the course of the animation:</p>
<pre class="cpp">@<span class="operator">-</span>webkit<span class="operator">-</span>keyframes push_down {
    from { margin<span class="operator">-</span>top: <span class="number">0em</span> }
    to   { margin<span class="operator">-</span>top: <span class="number">4em</span> }
}</pre>
<p>The <tt>-webkit-animation-fill-mode</tt> property avoids abrupt transitions before and after keyframes execute. It specifies that the keyframe's initial value for each manipulated property overrides the element's default property, so that the animation's initial appearance precedes any delay. The final state of each property also persists after the animation finishes executing.</p>
<p>The scrolling banner specifies a series of two animations. The first (<i>slide_down</i>) executes once, after the same 4-second delay, with its properties filling <tt>backward</tt> so that they persist after the animation stops:</p>
<pre class="cpp">header {
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>name              : slide_down    <span class="operator">,</span> scroll;
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>duration          : <span class="number">1s</span>            <span class="operator">,</span> <span class="number">20s</span>;
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>delay             : <span class="number">4s</span>            <span class="operator">,</span> <span class="number">5s</span>;
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>iteration<span class="operator">-</span>count   : <span class="number">1</span>             <span class="operator">,</span> infinite;
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>fill<span class="operator">-</span>mode         : backward      <span class="operator">,</span> both;
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>play<span class="operator">-</span>state        : running;
}</pre>
<p>The corresponding keyframe drops the element from above the top of the screen:</p>
<pre class="cpp">@<span class="operator">-</span>webkit<span class="operator">-</span>keyframes slide_down {
    from { <span class="operator">-</span>webkit<span class="operator">-</span>transform: translateY(<span class="operator">-</span><span class="number">10em</span>) }
    to { <span class="operator">-</span>webkit<span class="operator">-</span>transform: translateY(<span class="number">0</span>) }
}</pre>
<p>The second <i>scroll</i> keyframe executes over the course of 20 seconds, delayed after the initial set of animations execute, with the <tt>infinite</tt> iteration count setting it to run continuously. Intermediary keyframe states are represented as percentages:</p>
<pre class="cpp">@<span class="operator">-</span>webkit<span class="operator">-</span>keyframes scroll {
    <span class="number">0</span><span class="operator">%</span>   { <span class="operator">-</span>webkit<span class="operator">-</span>transform: translateX(<span class="number">0</span>) }
    <span class="number">17</span><span class="operator">%</span>  { <span class="operator">-</span>webkit<span class="operator">-</span>transform: translateX(<span class="number">0</span><span class="operator">%</span>) }
    <span class="number">20</span><span class="operator">%</span>  { <span class="operator">-</span>webkit<span class="operator">-</span>transform: translateX(<span class="operator">-</span><span class="number">20</span><span class="operator">%</span>) }
    <span class="number">37</span><span class="operator">%</span>  { <span class="operator">-</span>webkit<span class="operator">-</span>transform: translateX(<span class="operator">-</span><span class="number">20</span><span class="operator">%</span>) }
    <span class="number">40</span><span class="operator">%</span>  { <span class="operator">-</span>webkit<span class="operator">-</span>transform: translateX(<span class="operator">-</span><span class="number">40</span><span class="operator">%</span>) }
    <span class="number">57</span><span class="operator">%</span>  { <span class="operator">-</span>webkit<span class="operator">-</span>transform: translateX(<span class="operator">-</span><span class="number">40</span><span class="operator">%</span>) }
    <span class="number">60</span><span class="operator">%</span>  { <span class="operator">-</span>webkit<span class="operator">-</span>transform: translateX(<span class="operator">-</span><span class="number">60</span><span class="operator">%</span>) }
    <span class="number">77</span><span class="operator">%</span>  { <span class="operator">-</span>webkit<span class="operator">-</span>transform: translateX(<span class="operator">-</span><span class="number">60</span><span class="operator">%</span>) }
    <span class="number">80</span><span class="operator">%</span>  { <span class="operator">-</span>webkit<span class="operator">-</span>transform: translateX(<span class="operator">-</span><span class="number">80</span><span class="operator">%</span>) }
    <span class="number">97</span><span class="operator">%</span>  { <span class="operator">-</span>webkit<span class="operator">-</span>transform: translateX(<span class="operator">-</span><span class="number">80</span><span class="operator">%</span>) }
    <span class="number">100</span><span class="operator">%</span> { <span class="operator">-</span>webkit<span class="operator">-</span>transform: translateX(<span class="number">0</span><span class="operator">%</span>) }
}</pre>
<p>The scrolling element has a <tt>column-count</tt> of <tt>5</tt> and a <tt>width</tt> of <tt>500%</tt>, so the translations are measured relative to that wide element.</p>
<p>Animations can be paused as they progress. Tapping the scrolling bar in this example toggles a <i>pause</i> class. When applied, it pauses the <i>scroll</i> animaton and triggers a secondary <i>pulse</i> keyframe that makes inner banner elements fade in and out:</p>
<pre class="cpp"><span class="operator">.</span>pause {
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>play<span class="operator">-</span>state: paused;
}
<span class="operator">.</span>pause <span class="operator">&gt;</span> div {
    <span class="operator">-</span>webkit<span class="operator">-</span>animation           : pulse <span class="number">0.5s</span> infinite;
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>direction : alternate;
}
@<span class="operator">-</span>webkit<span class="operator">-</span>keyframes pulse {
    from { opacity: <span class="number">1</span> }
    to { opacity: <span class="number">0.5</span> }
}</pre>
<p>Note the keyframe's start and end state differ, but its <i>direction</i> is set to <tt>alternate</tt> forwards and backwards on successive odd/even iterations.</p>
<a name="resources"></a>
<h2>Resources</h2>
<ul>
<li><a href="http://css3.bradshawenterprises.com/all/">Richard Bradshaw: Using CSS3 Transitions, Transforms and Animation</a></li>
<li><a href="http://www.w3.org/TR/2009/WD-css3-transitions-20091201/">W3C: CSS Transitions Module Level 3</a></li>
<li><a href="http://www.w3.org/TR/css3-animations/">W3C: CSS Animations Module Level 3</a></li>
</ul>
<a name="xxx-g"></a>
<h2>XXX G</h2>
<p>This section provides guidance on how CSS-based animations can be incorporated into vibrant mobile interfaces. It discusses two related CSS features. <i>Transitions</i> animate between two sets of style sheets. <i>Keyframe animations</i> enable free-form animation sequences. (Many of the examples in this section also demonstrate <i>transforms</i>, potentially complex but otherwise static visual effects discussed in <a href="trans.html">the following section</a>.)</p>
<p><b>Note: </b>Animations can also be implemented with Canvas or SVG graphics libraries, but CSS animations are most useful when designing an overall interface. CSS-based animation also offers a tangible performance boost over animations implemented with JavaScript timers.</p><a name="transitions"></a>
<h3>Transitions</h3>
<p>Transitions specify gradual shifts from one set of style sheets to another. They help prevent abrupt jumps from one display state to another, which can be particularly disorientating in smaller-screen mobile interfaces.</p>
<p>Transitions specify properties to animate, the animation's duration, the function affecting the animation's progress, and an optional delay before the animation starts.</p>
<p>The following example shows a series of transitions of a <tt>&lt;nav&gt;</tt> element, from a collapsed icon state to an expanded panel:</p>
<p><a href="../examples/anim_panel.htm"><img src="images/transitionUI.png" alt="" /> </a></p>
<p><a href="../examples/css/anim_panel.css"><img src="images/icon_css.png" alt="" /> </a> <a href="../examples/js/anim_panel.js"><img src="images/icon_js.png" alt="" /> </a></p>
<p>Each style sheet specifies a different <tt>max-width</tt> value, and the transition allows the value to shift over the course of half a second:</p>
<pre class="cpp">nav<span class="operator">.</span>expanded  { max<span class="operator">-</span>width : <span class="number">95</span><span class="operator">%</span>; }
nav<span class="operator">.</span>collapsed { max<span class="operator">-</span>width : <span class="number">10</span><span class="operator">%</span>; }
nav {
    <span class="operator">-</span>webkit<span class="operator">-</span>transition    : max<span class="operator">-</span>width <span class="number">0.5s</span> ease<span class="operator">-</span>in<span class="operator">-</span>out;
}</pre>
<p>The transition shown above appears the same in both directions, but specifying properties separately for each style sheet allows them to be customized. In this variation, the panel takes twice as long to expand than to collapse:</p>
<pre class="cpp">nav<span class="operator">.</span>collapsed {
    max<span class="operator">-</span>width          : <span class="number">10</span><span class="operator">%</span>;
    <span class="operator">-</span>webkit<span class="operator">-</span>transition : max<span class="operator">-</span>width <span class="number">0.5s</span> ease<span class="operator">-</span>out;
}
nav<span class="operator">.</span>expanded {
    max<span class="operator">-</span>width          : <span class="number">95</span><span class="operator">%</span>;
    <span class="operator">-</span>webkit<span class="operator">-</span>transition : max<span class="operator">-</span>width <span class="number">1s</span> ease<span class="operator">-</span>in;
}</pre>
<p>The combined <tt>-webkit-transition</tt> property combines individual properties. (See <a href="#timing-functions">Timing Functions</a> below for more information on the <tt>-webkit-transition-timing-function</tt> property.)</p>
<pre class="cpp">nav {
    <span class="operator">-</span>webkit<span class="operator">-</span>transition<span class="operator">-</span>property        : max<span class="operator">-</span>width;
    <span class="operator">-</span>webkit<span class="operator">-</span>transition<span class="operator">-</span>duration        : <span class="number">0.5s</span>;
    <span class="operator">-</span>webkit<span class="operator">-</span>transition<span class="operator">-</span>timing<span class="operator">-</span>function : ease<span class="operator">-</span>in<span class="operator">-</span>out;
}</pre>
<p>When shifting from one interface state to another, transitions can shift between more than one pair of style sheets. The example above specifies an additional transition that fades and zooms in icons that are nested within the navigation panel, providing the overall appearance of a single animation effect:</p>
<pre class="cpp">nav <span class="operator">&gt;</span> <span class="operator">.</span>option {
    <span class="operator">-</span>webkit<span class="operator">-</span>transition : all <span class="number">0.5s</span> linear;
}
nav<span class="operator">.</span>expanded <span class="operator">&gt;</span> <span class="operator">.</span>option {
    opacity            : <span class="number">1</span>;
    <span class="operator">-</span>webkit<span class="operator">-</span>transform  : scale(<span class="number">1.0</span>);
}
nav<span class="operator">.</span>collapsed <span class="operator">&gt;</span> <span class="operator">.</span>option {
    opacity            : <span class="number">0</span>;
    <span class="operator">-</span>webkit<span class="operator">-</span>transform  : scale(<span class="number">0.0</span>);
}</pre>
<p>The fade is specified using <tt>opacity</tt>, and the zoom effect with <tt>-webkit-transform</tt>, discussed in the <a href="trans.html">next section</a>. A transition property of <tt>all</tt> applies to any valid property that differs between the two states.</p>
<p>Transitions apply not only to predefined style sheets, but more flexibly to values that are assigned dynamically, which helps to smooth shifts between application states. The example above would also display a transition if the <tt>max-width</tt> value were assigned directly to the element:</p>
<pre class="cpp">icon<span class="operator">.</span>style<span class="operator">.</span>maxWidth <span class="operator">=</span> <span class="char">'95%'</span>;</pre>
<p><b>Note: </b>CSS transitions perform robustly in response to ambiguous user input. As the navigation panel expands in the example above, tapping elsewhere gracefully interrupts and reverses the transition to its collapsed icon state.</p><a name="what-can-be-transitioned"></a>
<h3>What Can Be Transitioned?</h3>
<p>Most any CSS property expressed as a simple numeric measurement or color value can be transitioned between two style sheets. Color names correspond internally to numeric values, so they can be transitioned, along with keywords such as <tt>thin</tt> and <tt>thick</tt> that apply to <tt>border-width</tt>.</p>
<p>Transitions don't affect named values that refer to discrete states, such as the <tt>left</tt> and <tt>right</tt> properties used by <tt>text-align</tt>. Property values that feature complex syntax, such as for <a href="color.html#gradients">gradients</a>, <a href="color.html#masks">masks</a>, and <a href="color.html#reflections">reflections</a>, also cannot be transitioned.</p>
<p>In the example above, the <tt>max-width</tt> property in each style sheet specifies measurements as percentage units. Transitions may not work properly between fixed and flexible units.</p>
<p>Transitions cannot be applied to dynamically inserted content via <tt>:before</tt> and <tt>:after</tt> dynamic class selectors.</p>
<p>Transitions also cannot be applied to dynamically positioned elements. The following example shows a list of stacked items that rearrange themselves when they are dismissed or filtered away:</p>
<p><a href="../examples/anim_skew.htm"><img src="images/scr_anim_skew.png" alt="" /> </a></p>
<p><a href="../examples/css/anim_skew.css"><img src="images/icon_css.png" alt="" /> </a> <a href="../examples/js/anim_skew.js"><img src="images/icon_js.png" alt="" /> </a></p>
<p>Items must be assigned to a grid, and can't be animated by letting the browser stack them freely. However, implicit CSS values may be transitoned. For example, a transition to a specific <tt>background-color</tt> from a set of style sheets that don't specify any color assume the default value of <tt>transparent</tt>.</p>
<a name="transitional-sequences"></a>
<h3>Transitional Sequences</h3>
<p>As <a href="#transitions">shown above</a>, separate transitions can be applied simultaneously to different sets of elements. Alternately, more than one transition can be applied to the same set of elements.</p>
<p>Each transition property can accommodate more than one value, each separated with a comma. Applying an accompanying delay allows for transitions to appear in sequence. The following example shows how a panel may expand in two half-second stages that modify the <tt>width</tt> followed by the <tt>height</tt>, then reverse the sequence when collapsing:</p>
<pre class="cpp">nav<span class="operator">.</span>expanded {
  <span class="operator">-</span>webkit<span class="operator">-</span>transition<span class="operator">-</span>property : width<span class="operator">,</span> height;
}
nav<span class="operator">.</span>collapsed {
  <span class="operator">-</span>webkit<span class="operator">-</span>transition<span class="operator">-</span>property : height<span class="operator">,</span> width;
}
nav {
  <span class="operator">-</span>webkit<span class="operator">-</span>transition<span class="operator">-</span>duration : <span class="number">0.5s</span><span class="operator">,</span> <span class="number">0.5s</span>;
  <span class="operator">-</span>webkit<span class="operator">-</span>transition<span class="operator">-</span>delay    : <span class="number">0.0s</span><span class="operator">,</span> <span class="number">0.5s</span>;
}</pre>
<p>The following example uses these sequential transitions to slide out an embedded a navigation panel:</p>
<p><a href="../examples/anim_accord.htm"><img src="images/scr_anim_trans_accord1.png" alt="" /> <img src="images/scr_anim_trans_accord2.png" alt="" /> <img src="images/scr_anim_trans_accord3.png" alt="" /> </a></p>
<p><a href="../examples/css/anim_accord.css"><img src="images/icon_css.png" alt="" /> </a> <a href="../examples/js/anim_accord.js"><img src="images/icon_js.png" alt="" /> </a></p>
<p>The following example shows a photo gallery interface that uses the same technique to flip images to reveal descriptive text. It relies on a sequence of simple <a href="trans.html">2D <tt>scale</tt> transforms</a>, one that narrows the first visible element, followed by another that widens the second hidden one:</p>
<p><a href="../examples/anim_gallery.htm"><img src="images/scr_anim_gallery.png" alt="" /> <img src="images/scr_anim_gallery2.png" alt="" /> </a></p>
<p><a href="../examples/css/anim_gallery.css"><img src="images/icon_css.png" alt="" /> </a> <a href="../examples/js/anim_gallery.js"><img src="images/icon_js.png" alt="" /> </a></p>
<p>This example shows how flexibly transitions may be applied. When users tap on adjacent photos, the panel automatically flips back to its original state as it is moved to the side.</p>
<a name="timing-functions"></a>
<h3>Timing Functions</h3>
<p>Timing properties allow the speed at which transitions (and <a href="#keyframe-animations">keyframe animations</a>) progress to vary over their duration.</p>
<p>If a timing function's value specifies the <tt>linear</tt> keyword, the transition starts and stops abruptly, and its speed remains constant. Otherwise, timing functions specify progress in terms of a bezier curve whose control points are expressed as decimals. Various keyword values correspond to bezier functions as follows:</p>
<ul>
<li><tt>linear</tt>: <tt>cubic-bezier(0.0, 0.0, 1.0, 1.0)</tt></li>
<li><tt>ease</tt> (default): <tt>cubic-bezier(0.25, 0.1, 0.25, 1.0)</tt></li>
<li><tt>ease-in</tt>: <tt>cubic-bezier(0.42, 0, 1.0, 1.0)</tt></li>
<li><tt>ease-out</tt>: <tt>cubic-bezier(0, 0, 0.58, 1.0)</tt></li>
<li><tt>ease-in-out</tt>: <tt>cubic-bezier(0.42, 0, 0.58, 1.0)</tt></li>
</ul>
<p>The following example demonstrates various preset timing functions and custom <tt>cubic-bezier()</tt> functions:</p>
<p><a href="../examples/anim_timer.htm"><img src="images/scr_anim_timer.png" alt="" /> </a></p>
<p>See <a href="http://www.netzgesta.de/dev/cubic-bezier-timing-function.html">netzgesta.de</a> for an interactive visualization of how preset and <tt>cubic-bezier()</tt> timing functions appear as a response curve.</p>
<a name="keyframe-animations"></a>
<h3>Keyframe Animations</h3>
<p>Keyframe animations offer an easy way to specify sequences involving many animated transitions. Unlike <a href="#transitions">transitions</a>, they can execute freely, and are not assigned to shifts between sets of style sheets.</p>
<p>The following example shows a simple animation of icons that pulse three times when tapped:</p>
<p><a href="../examples/anim_pulse.htm"><img src="images/scr_anim_pulse.png" alt="" /> </a></p>
<p><a href="../examples/css/anim_pulse.css"><img src="images/icon_css.png" alt="" /> </a></p>
<p>It uses the following CSS, shown here in both abbreviated and long form:</p>
<pre class="cpp">nav <span class="operator">&gt;</span> a:target { <span class="operator">-</span>webkit<span class="operator">-</span>animation : pulse <span class="number">0.5s</span> <span class="number">3</span>; }

nav <span class="operator">&gt;</span> a:target {
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>name            : pulse;
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>duration        : <span class="number">0.5s</span>;
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>iteration<span class="operator">-</span>count : <span class="number">3</span>;
}</pre>
<p>As with transitions, the <tt>duration</tt> specifies the length of the entire animation, in this case half a second. By default, animations execute once, but setting an integer <tt>iteration-count</tt> allows them to repeat. The <tt>infinite</tt> keyword runs the animation continuously. The animation must have a <tt>name</tt>, with a corresponding <i>keyframes</i> rule detailing the animation's full progression, specified elsewhere within the CSS:</p>
<pre class="cpp">@<span class="operator">-</span>webkit<span class="operator">-</span>keyframes pulse {
    <span class="number">0</span><span class="operator">%</span> { opacity   : <span class="number">1.0</span> }
    <span class="number">50</span><span class="operator">%</span> { opacity  : <span class="number">0.5</span> }
    <span class="number">100</span><span class="operator">%</span> { opacity : <span class="number">1.0</span> }
}</pre>
<p>This animation shifts between two different <tt>opacity</tt> values over the course of a half second, with percentages marking intermediary states within the course of the animation. Like regular CSS selectors, each intermediary state can specify various CSS properties.</p>
<p>The following shows a different way to implement this simple animation:</p>
<pre class="cpp">@<span class="operator">-</span>webkit<span class="operator">-</span>keyframes pulse {
    from { opacity : <span class="number">1.0</span> }
    to   { opacity : <span class="number">0.5</span> }
}

nav <span class="operator">&gt;</span> a:target {
    <span class="operator">-</span>webkit<span class="operator">-</span>animation : pulse <span class="number">0.25s</span> <span class="number">0.5s</span> <span class="number">6</span> alternate linear;
}

nav <span class="operator">&gt;</span> a:target {
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>name            : pulse;
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>duration        : <span class="number">0.25s</span>;
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>iteration<span class="operator">-</span>count : <span class="number">6</span>;
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>direction       : alternate;
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>delay           : <span class="number">0.5s</span>;
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>timing<span class="operator">-</span>function : linear;
}</pre>
<p>In this case, the keyframe animation only defines half of the entire visual sequence. Instead, the animation's <tt>direction</tt> is alternated, so that even-numbered iterations are played back in reverse. (To match the original appearance, the iteration count is doubled, and the duration is halved.)</p>
<p>This modified animation adds a half-second <tt>delay</tt>, in this case to allow enough time for the user's finger to lift from the mobile screen to see the entire animation execute. It also specifies a linear <a href="#timing-functions"><tt>timing-function</tt></a> apply to shifts within the animation.</p>
<p>The following example shows a more complex sequence of alternating rapid shifts and longer static phases, in which five banner options scroll continuously at the top of the screen. (It uses <a href="trans.html">translations</a> to manipulate a <a href="orient.html#multicolumn-layout">multicolumn element</a> that is five times the width of the window.)</p>
<table class="generic">
 <tr valign="top" class="odd"><td ><a href="../examples/css3_multicol.htm"><img src="images/scr_css3_multicol.png" alt="" /> </a><p><a href="../examples/css/css3_multicol.css"><img src="images/icon_css.png" alt="" /> </a></p>
</td><td ><pre class="cpp">@<span class="operator">-</span>webkit<span class="operator">-</span>keyframes banner_scroll {
    <span class="number">0</span><span class="operator">%</span>   { <span class="operator">-</span>webkit<span class="operator">-</span>transform : translate(<span class="number">0</span><span class="operator">%</span>);   }
    <span class="number">18</span><span class="operator">%</span>  { <span class="operator">-</span>webkit<span class="operator">-</span>transform : translate(<span class="number">0</span><span class="operator">%</span>);   }
    <span class="number">20</span><span class="operator">%</span>  { <span class="operator">-</span>webkit<span class="operator">-</span>transform : translate(<span class="operator">-</span><span class="number">20</span><span class="operator">%</span>); }
    <span class="number">38</span><span class="operator">%</span>  { <span class="operator">-</span>webkit<span class="operator">-</span>transform : translate(<span class="operator">-</span><span class="number">20</span><span class="operator">%</span>); }
    <span class="number">40</span><span class="operator">%</span>  { <span class="operator">-</span>webkit<span class="operator">-</span>transform : translate(<span class="operator">-</span><span class="number">40</span><span class="operator">%</span>); }
    <span class="number">58</span><span class="operator">%</span>  { <span class="operator">-</span>webkit<span class="operator">-</span>transform : translate(<span class="operator">-</span><span class="number">40</span><span class="operator">%</span>); }
    <span class="number">60</span><span class="operator">%</span>  { <span class="operator">-</span>webkit<span class="operator">-</span>transform : translate(<span class="operator">-</span><span class="number">60</span><span class="operator">%</span>); }
    <span class="number">78</span><span class="operator">%</span>  { <span class="operator">-</span>webkit<span class="operator">-</span>transform : translate(<span class="operator">-</span><span class="number">60</span><span class="operator">%</span>); }
    <span class="number">80</span><span class="operator">%</span>  { <span class="operator">-</span>webkit<span class="operator">-</span>transform : translate(<span class="operator">-</span><span class="number">80</span><span class="operator">%</span>); }
    <span class="number">95</span><span class="operator">%</span>  { <span class="operator">-</span>webkit<span class="operator">-</span>transform : translate(<span class="operator">-</span><span class="number">80</span><span class="operator">%</span>); }
    <span class="number">100</span><span class="operator">%</span> { <span class="operator">-</span>webkit<span class="operator">-</span>transform : translate(<span class="number">0</span><span class="operator">%</span>);   }
}</pre>
</td></tr>
</table>
<p>The example above executes continuously when the page loads. The sliding-navigation example below executes once when the page loads, but contextually based on the target of navigation within the page:</p>
<table class="generic">
 <tr valign="top" class="odd"><td ><a href="../examples/anim_slide1.htm"><img src="images/scr_anim_slide1.png" alt="" /> </a><p><a href="../examples/css/anim_slide.css"><img src="images/icon_css.png" alt="" /> </a></p>
</td><td ><pre class="cpp"><span class="operator">&lt;</span>style<span class="operator">&gt;</span>
<span class="preprocessor">#in:target           { -webkit-animation : from_right 0.25s  }</span>
<span class="preprocessor">#out:target + .panel { -webkit-animation : from_left 0.25s }</span>

@<span class="operator">-</span>webkit<span class="operator">-</span>keyframes from_right {
    from { <span class="operator">-</span>webkit<span class="operator">-</span>transform : translate(<span class="number">80</span><span class="operator">%</span>); }
    to   { <span class="operator">-</span>webkit<span class="operator">-</span>transform : translate(<span class="number">0</span><span class="operator">%</span>); }
}
@<span class="operator">-</span>webkit<span class="operator">-</span>keyframes from_left {
    from { <span class="operator">-</span>webkit<span class="operator">-</span>transform : translate(<span class="operator">-</span><span class="number">80</span><span class="operator">%</span>); }
    to { <span class="operator">-</span>webkit<span class="operator">-</span>transform   : translate(<span class="number">0</span><span class="operator">%</span>); }
}
<span class="operator">&lt;</span><span class="operator">/</span>style<span class="operator">&gt;</span>

<span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>

<span class="operator">&lt;</span>a id<span class="operator">=</span><span class="char">'out'</span><span class="operator">&gt;</span><span class="operator">&lt;</span><span class="operator">/</span>a<span class="operator">&gt;</span>
<span class="operator">&lt;</span>div id<span class="operator">=</span><span class="char">'in'</span> <span class="keyword">class</span><span class="operator">=</span><span class="char">'panel'</span><span class="operator">&gt;</span>
<span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>
<span class="operator">&lt;</span><span class="operator">/</span>div<span class="operator">&gt;</span></pre>
</td></tr>
</table>
<p>The following slide-show example assigns the same animation to many elements, sliding them in and out of view. It specifies progressively longer delays to each element to build a larger sequence, with one element's duration extended to provide more time to read it:</p>
<table class="generic">
 <tr valign="top" class="odd"><td ><a href="../examples/anim_present.htm"><img src="images/scr_anim_present.png" alt="" /> </a><p><a href="../examples/css/anim_present.css"><img src="images/icon_css.png" alt="" /> </a></p>
</td><td ><pre class="cpp">section {
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>name     : slideFrame;
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>duration : <span class="number">5s</span>;
    <span class="operator">-</span>webkit<span class="operator">-</span>transform          : translate(<span class="operator">-</span><span class="number">150</span><span class="operator">%</span>);
    <span class="operator">-</span>webkit<span class="operator">-</span>transform<span class="operator">-</span>origin   : bottom;
}
section:nth<span class="operator">-</span>of<span class="operator">-</span>type(<span class="number">1</span>) { <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>delay  : <span class="number">2s</span>; }
section:nth<span class="operator">-</span>of<span class="operator">-</span>type(<span class="number">2</span>) { <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>delay  : <span class="number">8s</span>; }
section:nth<span class="operator">-</span>of<span class="operator">-</span>type(<span class="number">3</span>) { <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>delay  : <span class="number">14s</span>; }
section:nth<span class="operator">-</span>of<span class="operator">-</span>type(<span class="number">4</span>) {
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>delay    : <span class="number">20s</span>;
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>duration : <span class="number">8s</span>;
}
section:nth<span class="operator">-</span>of<span class="operator">-</span>type(<span class="number">5</span>) { <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>delay  : <span class="number">29s</span>; }</pre>
</td></tr>
</table>
<p>The animation provides the illusion that the incoming slide hits a hard barrier, while outgoing slides speed up gradually. This can be accomplished by changing the timing function during the course of the animation:</p>
<pre class="cpp">@<span class="operator">-</span>webkit<span class="operator">-</span>keyframes slideFrame {
  from {
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>timing<span class="operator">-</span>function : linear;
    <span class="operator">-</span>webkit<span class="operator">-</span>transform: translate(<span class="operator">-</span><span class="number">150</span><span class="operator">%</span>) skewX(<span class="number">5deg</span>);
  }
  <span class="number">10</span><span class="operator">%</span> { <span class="operator">-</span>webkit<span class="operator">-</span>transform : translate(<span class="number">0</span>) skewX(<span class="number">5deg</span>); }
  <span class="number">15</span><span class="operator">%</span> {
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>timing<span class="operator">-</span>function : <span class="keyword">default</span>;
    <span class="operator">-</span>webkit<span class="operator">-</span>transform : translate(<span class="number">0</span>) skewX(<span class="operator">-</span><span class="number">5deg</span>);
  }
  <span class="number">20</span><span class="operator">%</span> { <span class="operator">-</span>webkit<span class="operator">-</span>transform : translate(<span class="number">0</span>) skewX(<span class="number">0deg</span>); }
  <span class="number">90</span><span class="operator">%</span> { <span class="operator">-</span>webkit<span class="operator">-</span>transform : translate(<span class="number">0</span>) skewX(<span class="number">0deg</span>); }
  to { <span class="operator">-</span>webkit<span class="operator">-</span>transform : translate(<span class="number">150</span><span class="operator">%</span>) skewX(<span class="number">10deg</span>); }
}</pre>
<p>As is true for transitions, an element may be assigned more than one keyframe animation:</p>
<pre class="cpp"><span class="operator">.</span>pair_keyframes { <span class="operator">-</span>webkit<span class="operator">-</span>animation : anim1 <span class="number">1s</span> <span class="number">2</span> alternate<span class="operator">,</span> anim2 <span class="number">2s</span>; }</pre>
<p>Even if one of the animations is delayed, each keyframe rule must manipulate different sets of CSS properties, or it does not work. Animations may also execute along with transitions, as in the following example.</p>
<table class="generic">
 <tr valign="top" class="odd"><td ><a href="../examples/anim_combine.htm"><img src="images/scr_anim_combine.png" alt="" /> </a><p><a href="../examples/css/anim_combine.css"><img src="images/icon_css.png" alt="" /> </a></p>
</td><td ><pre class="cpp">@<span class="operator">-</span>webkit<span class="operator">-</span>keyframes nod {
    from {
        <span class="operator">-</span>webkit<span class="operator">-</span>box<span class="operator">-</span>shadow    : transparent <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>;
        background<span class="operator">-</span>position   : <span class="number">50</span><span class="operator">%</span> <span class="number">50</span><span class="operator">%</span>;
    }
    <span class="number">20</span><span class="operator">%</span> { background<span class="operator">-</span>position : <span class="number">50</span><span class="operator">%</span> <span class="number">90</span><span class="operator">%</span> }
    <span class="number">40</span><span class="operator">%</span> { background<span class="operator">-</span>position : <span class="number">50</span><span class="operator">%</span> <span class="number">10</span><span class="operator">%</span> }
    <span class="number">60</span><span class="operator">%</span> { background<span class="operator">-</span>position : <span class="number">50</span><span class="operator">%</span> <span class="number">90</span><span class="operator">%</span> }
    <span class="number">80</span><span class="operator">%</span> { background<span class="operator">-</span>position : <span class="number">50</span><span class="operator">%</span> <span class="number">10</span><span class="operator">%</span> }
    to {
        background<span class="operator">-</span>position   : <span class="number">50</span><span class="operator">%</span> <span class="number">50</span><span class="operator">%</span>;
        <span class="operator">-</span>webkit<span class="operator">-</span>box<span class="operator">-</span>shadow    : lightgreen <span class="number">0em</span> <span class="number">0em</span> <span class="number">0.5em</span> <span class="number">0.25em</span>;
    }
}</pre>
</td></tr>
</table>
<p>The accompanying CSS shows how the two separate visual effects might be consolidated within a single keyframe rule, with the <tt>start</tt> and <tt>end</tt> value of the <tt>-webkit-box-shadow</tt> property matching the initial and destination style sheet, to simulate a transition.</p>
<a name="dynamic-keyframes"></a>
<h3>Dynamic Keyframes</h3>
<p>Keyframe animations can be initiated by changing the <tt>animation-name</tt> to one with a matching keyframe rule. This can be done by applying a style sheet, or by manipulating elements directly:</p>
<pre class="cpp">element<span class="operator">.</span>style<span class="operator">.</span>WebkitAnimationName <span class="operator">=</span> <span class="char">'roll'</span>;</pre>
<p>Dynamically generated keyframe rules only activate when added to a local <tt>&lt;style&gt;</tt> region within the page. They can be redefined immediately after they execute, as the animation proceeds.</p>
<p>The following example shows a gaming dice piece built with <a href="trans.html#3d-transforms">3D transforms</a>. An additional keyframe animation spins the entire cube using an additional set of randomly generated 3D transforms. Tapping the element applies the <i>roll</i> class, which changes the animation name from a default empty string to one that matches a keyframe rule:</p>
<table class="generic">
 <tr valign="top" class="odd"><td ><a href="../examples/anim_dice.htm"><img src="images/scr_anim_dice.png" alt="" /> </a><p><a href="../examples/css/anim_dice.css"><img src="images/icon_css.png" alt="" /> </a> <a href="../examples/js/anim_dice.js"><img src="images/icon_js.png" alt="" /> </a></p>
</td><td ><pre class="cpp"><span class="operator">.</span>dice {
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>name            : <span class="string">&quot;&quot;</span>;
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>duration        : <span class="number">1s</span>;
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>iteration<span class="operator">-</span>count : <span class="number">2</span>;
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>direction       : alternate;
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>timing<span class="operator">-</span>function : linear;
}
<span class="operator">.</span>roll {
    <span class="operator">-</span>webkit<span class="operator">-</span>animation<span class="operator">-</span>name            : haphazard_spin;
}
@<span class="operator">-</span>webkit<span class="operator">-</span>keyframes haphazard_spin {
  from { <span class="operator">-</span>webkit<span class="operator">-</span>transform: rotateX(<span class="number">20deg</span>)  rotateY(<span class="number">40deg</span>)  rotateZ(<span class="number">30deg</span>)  }
  <span class="number">25</span><span class="operator">%</span>  { <span class="operator">-</span>webkit<span class="operator">-</span>transform: rotateX(<span class="number">190deg</span>) rotateY(<span class="number">220deg</span>) rotateZ(<span class="number">300deg</span>) }
  <span class="number">50</span><span class="operator">%</span>  { <span class="operator">-</span>webkit<span class="operator">-</span>transform: rotateX(<span class="number">220deg</span>) rotateY(<span class="number">160deg</span>) rotateZ(<span class="number">80deg</span>)  }
  <span class="number">75</span><span class="operator">%</span>  { <span class="operator">-</span>webkit<span class="operator">-</span>transform: rotateX(<span class="number">20deg</span>)  rotateY(<span class="number">40deg</span>)  rotateZ(<span class="number">230deg</span>) }
  to   { <span class="operator">-</span>webkit<span class="operator">-</span>transform: rotateX(<span class="number">184deg</span>) rotateY(<span class="number">300deg</span>) rotateZ(<span class="number">150deg</span>) }
}</pre>
</td></tr>
</table>
<p>Applications may halt animations in progress by setting <tt>-webkit-animation-play-state</tt> to <tt>paused</tt> or back to <tt>running</tt>:</p>
<pre class="cpp">element<span class="operator">.</span>style<span class="operator">.</span>WebkitAnimationPlayState <span class="operator">=</span> <span class="char">'paused'</span>;
element<span class="operator">.</span>style<span class="operator">.</span>WebkitAnimationPlayState <span class="operator">=</span> <span class="char">'running'</span>;</pre>
<p>If there is a difference between an element's conventional set of CSS properties, and CSS properties as they are defined at the start and end of a keyframe rule, they may become conspicuous if the animation is delayed, or if it executes a finite number of times. Setting <tt>-webkit-animation-fill-mode</tt> to <tt>forwards</tt>, <tt>backwards</tt>, or <tt>both</tt> determines whether the set of CSS properties that bounds the keyframe sequence appears outside the duration of its execution, potentially overriding properties <i>not</i> defined in keyframes.</p>
<p>The following example allows users to initiate a marquee-style scroll. Tapping on the <a href="border.html#text-overflow">ellipses</a> that mark overly long song titles generates a custom keyframe based on the <tt>scrollWidth</tt> of the overflowing element, so that longer song titles scroll more quickly than short ones. The keyframe manipulates the <tt>text-indent</tt> property to scroll the element off to the left, hide the text while it is repositioned off to the right midway through the animation, then scroll it back into view:</p>
<table class="generic">
 <tr valign="top" class="odd"><td ><a href="../examples/anim_marquee.htm"><img src="images/scr_anim_marquee.png" alt="" /> </a><p><a href="../examples/css/anim_marquee.css"><img src="images/icon_css.png" alt="" /> </a> <a href="../examples/js/anim_marquee.js"><img src="images/icon_js.png" alt="" /> </a></p>
</td><td ><pre class="cpp">@<span class="operator">-</span>webkit<span class="operator">-</span>keyframes custom {
    <span class="number">0</span><span class="operator">%</span>   { text<span class="operator">-</span>indent: <span class="number">0</span><span class="operator">%</span>    ; color: <span class="preprocessor">#000        }</span>
    <span class="number">49</span><span class="operator">%</span>  { text<span class="operator">-</span>indent: <span class="operator">-</span><span class="number">125</span><span class="operator">%</span> ; color: <span class="preprocessor">#000        }</span>
    <span class="number">50</span><span class="operator">%</span>  { text<span class="operator">-</span>indent: <span class="operator">-</span><span class="number">125</span><span class="operator">%</span> ; color: transparent }
    <span class="number">51</span><span class="operator">%</span>  { text<span class="operator">-</span>indent: <span class="number">125</span><span class="operator">%</span>  ; color: transparent }
    <span class="number">52</span><span class="operator">%</span>  { text<span class="operator">-</span>indent: <span class="number">125</span><span class="operator">%</span>  ; color: <span class="preprocessor">#000        }</span>
    <span class="number">100</span><span class="operator">%</span> { text<span class="operator">-</span>indent: <span class="number">0</span><span class="operator">%</span>    ; color: <span class="preprocessor">#000        }</span>
}</pre>
</td></tr>
</table>
<p><b>Note: </b>In the animation above, the <tt>text-indent</tt> property is defined redundantly within the 49% and 50% keyframes. It accounts for a slight variation in how browsers interpret keyframes. Removing the <tt>text-indent</tt> property from the 49% keyframe may lead some browsers to assume the property should transition smoothly between the 0% and 50% keyframes. Others may assume the 49% keyframe should be filled with the property's last known value, zero, which in this case would lead to a long static period followed by an unintentionally abrupt transition.</p></div>
<!-- @@@animation.html -->
<!-- END -->
<?php include('../../footer.inc'); ?></body>
</html>
